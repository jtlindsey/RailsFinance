<p id="notice"><%= notice %></p>

<div class="row visible-sm-block visible-md-block visible-lg-block">
  <div class="col-md-12">
    <div class="panel panel-primary">
      <div class="panel-heading panels-text">
        <%= "(#{@account.type})-#{@account.name} #{@account.last4} " %><%= link_to "Edit", account_path(@account.id), title: 'Edit Account' %>
      </div>
      <div class="panel-body">

        <table class="table table-striped table-hover table-condensed">
          <thead>
            <tr>
              <th>Date</th>
              <th>Check#</th>
              <th>Payee</th>
              <th>Category</th>
              <th>Comment</th>
              <th>Deposit</th>
              <th>Withdrawal</th>
              <th>Balance</th>
            </tr>
          </thead>

          <tbody>
            <% @transactions.order(:created_at).each do |transaction| %>
              <tr>
                <td><%= transaction.date.to_date %></td>
                <td><%= "temp" %></td> <!-- transction check# -->
                <td><%= transaction.payee %></td>
                <td><%= "temp" %></td> <!-- transction category -->
                <td><%= truncate(transaction.comment) %></td> <!-- transction comment -->

                <% if transaction.transaction_type == 'Deposit' %>
                  <td><%= number_to_currency(transaction.applied_amount) %></td> <!-- transction deposit -->
                  <td><%= "" %></td> <!-- transction withdrawal -->
                <% end %>
                <% if transaction.transaction_type == 'Withdrawal' %>
                  <td><%= "" %></td> <!-- transction deposit -->
                  <td><%= number_to_currency(transaction.applied_amount) %></td> <!-- transction withdrawal -->
                <% end %>

                <td><%= number_to_currency(transaction.new_balance) %></td>


                <td><%= link_to 'Show', account_transaction_path(transaction.account, transaction) %></td>
                <td><%= link_to 'Edit', edit_account_transaction_path(transaction.account, transaction) %></td>
                <td><%= link_to 'Destroy', account_transaction_path(transaction.account, transaction), method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
            <% end %>
          </tbody>
        </table>

      </div>
    </div>
  </div>
</div> 

<!-- Mobile -->
<% @transactions.each_with_index do |transaction, i| %>
  <table class="visible-xs-block table table-striped">
  <tbody>
    <tr><td>Date</td><td><%= "#{transaction.date.to_date}" %></td></tr>
    <tr><td>Check#</td><td><%= "temp" %></td></tr>
    <tr><td>Payee</td><td><%= transaction.payee %></td></tr>
    <tr><td>Category</td><td><%= "temp" %></td></tr>
    <tr><td>Comment</td><td><%= truncate(transaction.comment) %></td></tr>
    <tr><td>Withdrawal</td><td><%= "temp" %></td></tr>
    <tr><td>Deposit</td><td><%= "temp" %></td></tr>
    <tr><td>Balance</td><td><%= "temp" %></td></tr>
    <tr>
      <td><%= link_to 'Show', account_transaction_path(transaction.account, transaction) %></td>
      <td><%= link_to 'Edit', edit_account_transaction_path(transaction.account, transaction) %></td>
      <td><%= link_to 'Destroy', account_transaction_path(transaction.account, transaction), method: :delete, data: { confirm: 'Are you sure?' } %></td>
    </tr>
  </tbody>
  </table>
<% end %>
<!-- End Mobile -->

<br>

<%= link_to 'New Transaction', new_account_transaction_path(account_id: params[:account_id]) %>

<br><br>
<h2>**TODO**</h2>
Change fields based on account type (...example, don't show check# on savings transactions)
<h2>**TODO**</h2>
