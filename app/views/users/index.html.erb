<% if current_user.admin? %>

<div class="row">
  <div class="col-md-12">
    <div class="panel panel-danger">
      <div class="admin-header"><i class="fa fa-cog fa-spin"></i> User Administration</div>
      <div class="admin-body">

        Updated at: <%= DateTime.now.strftime("%d-%b-%Y %l:%M%P") %>

      </div>
    </div>
  </div>
</div>


<div class="row">
  <div class="col-lg-3 col-md-6">
      <div class="panel panel-danger">
          <div class="panel-heading">
              <div class="row">
                  <div class="col-xs-3">
                      <i class="fa fa-users fa-5x"></i>
                  </div>
                  <div class="col-xs-9 text-right">
                      <div class="huge"><%= @users.count %></div>
                      <div>Current Users</div>
                  </div>
              </div>
          </div>
          <a href="#" id="current-users">
              <div class="panel-footer">
                  <span class="pull-left">View Details</span>
                  <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                  <div class="clearfix"></div>
              </div>
          </a>
      </div>
  </div>

  <div class="col-lg-3 col-md-6">
      <div class="panel panel-danger">
          <div class="panel-heading">
              <div class="row">
                  <div class="col-xs-3">
                      <i class="fa fa-bank fa-5x"></i>
                  </div>
                  <div class="col-xs-9 text-right">
                      <div class="huge"><%= @users_accounts.count %></div>
                      <div>Users Accounts</div>
                  </div>
              </div>
          </div>
          <a href="#" id="current-users-accounts">
              <div class="panel-footer">
                  <span class="pull-left">View Details</span>
                  <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                  <div class="clearfix"></div>
              </div>
          </a>
      </div>
  </div>

  <div class="col-lg-3 col-md-6">
      <div class="panel panel-danger">
          <div class="panel-heading">
              <div class="row">
                  <div class="col-xs-3">
                      <i class="fa fa-dollar fa-5x"></i>
                  </div>
                  <div class="col-xs-9 text-right">
                      <div class="huge"><%= @users_transactions.count %></div>
                      <div>Users Transactions</div>
                  </div>
              </div>
          </div>
          <a href="#">
              <div class="panel-footer">
                  <span class="pull-left">View Details</span>
                  <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                  <div class="clearfix"></div>
              </div>
          </a>
      </div>
  </div>

  <div class="col-lg-3 col-md-6">
      <div class="panel panel-danger">
          <div class="panel-heading">
              <div class="row">
                  <div class="col-xs-3">
                      <i class="fa fa-cloud-upload fa-5x"></i>
                  </div>
                  <div class="col-xs-9 text-right">
                      <div class="huge"><%= @users_documents.count %></div>
                      <div>Users Documents</div>
                  </div>
              </div>
          </div>
          <a href="#">
              <div class="panel-footer">
                  <span class="pull-left">View Details</span>
                  <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                  <div class="clearfix"></div>
              </div>
          </a>
      </div>
  </div>

</div>


<div class="row">
  <div class="col-md-12">
    <div class="panel panel-danger">
      <div class="panel-heading">Administration</div>
      <div class="panel-body" >

<!-- some details -->

        <p>
          <%= link_to 'Admin Console', users_path, class: "btn btn-danger" %>
        </p>

      </div>
    </div>
  </div>
</div>


<!-- Partials -->

<div class="row">
  <div id="admin-content-details" style="display:none;"></div>
</div>

<!-- End Partials -->


<div class="row">
  <div class="col-md-12">
    <div class="panel panel-danger">
      <div class="panel-heading">Usage by Logins Per Day</div>
      <div class="panel-body" style="padding: 0;" >

      <%#= area_chart @visits.group_by_day(:created_at).count %>
      <!-- Browser date matching rails app date -->
      <%= area_chart @visits.group_by_day(:created_at, format: "%B %d, %Y").count %>
      <!-- size not correct, not filling div -->
      <%#= area_chart @visits.group_by_day(:created_at, format: "%B %d, %Y").count, height: "300px" %>
      <%#= area_chart @visits.group_by_day(:created_at, format: "%B %d, %Y").count, options: {
            width: 800,
            height: 100
        } %>


      </div>
    </div>
  </div>
</div>

<% end %>


<!-- TEST -->
<script>

  $('#current-users').click(function() {
    $('#admin-content-details').html("<%= j (render 'users_details') %>");
    $('#admin-content-details').slideDown(350);
  });

  $('#current-users-accounts').click(function() {
    $('#admin-content-details').html("<%= j (render 'users_accounts') %>");
    $('#admin-content-details').slideDown(350);
  });



</script>